<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì¬ë‚œëŒ€ë¹„ í›ˆë ¨ Â· ìƒì¡´ê°€ë°© ì‹œë®¬ë ˆì´ì…˜</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    html, body { background:#f7fafc }
    .ratio-16x9 { position: relative; width: 100%; padding-top: 56.25%; }
    .ratio-16x9 iframe { position: absolute; top:0; left:0; width:100%; height:100%; border:0; border-radius: 12px; }
  </style>
</head>
<body class="min-h-screen">
  <div id="root"></div>

  <script type="text/babel">
// ====== 0) ì‚¬ìš©ì ì œê³µ ì„œë‘ (Intro / Video) ======
// uploaded JSXì˜ í†¤ì„ ë§ì¶° êµ¬ì„±: IntroPage + VideoPage
const IntroPage = ({ goVideo }) => (
  <div className="min-h-screen bg-gradient-to-br from-blue-50 to-orange-50 p-8">
    <div className="max-w-4xl mx-auto">
      <div className="bg-white rounded-2xl shadow-2xl p-8 mb-6">
        <div className="flex items-center gap-4 mb-6">
          <svg className="w-12 h-12 text-red-500" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 9v2m0 4h.01M12 5a7 7 0 100 14 7 7 0 000-14z"/>
          </svg>
          <h1 className="text-4xl font-bold text-gray-800">ì¬ë‚œëŒ€ë¹„ í›ˆë ¨</h1>
        </div>
        <div className="bg-red-50 border-l-4 border-red-500 p-6 mb-6 rounded-r-lg">
          <h2 className="text-2xl font-bold text-red-900 mb-4">ğŸš¨ ì¬ë‚œ ìƒí™© ìƒì¡´ ì‹œë®¬ë ˆì´ì…˜</h2>
          <p className="text-lg text-gray-700 leading-relaxed mb-4">
            ì¬ë‚œì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‚˜ëŠ” ë¬´ì‚¬íˆ ì‚´ì•„ë‚¨ì•˜ì§€ë§Œ íƒˆì¶œí•˜ì§€ëŠ” ëª»í–ˆìŠµë‹ˆë‹¤.
          </p>
          <p className="text-lg text-gray-700">
            êµ¬ì¡°ëŒ€ê°€ ì˜¬ ë•Œê¹Œì§€ 72ì‹œê°„ì„ ë²„í…¨ì•¼ í•©ë‹ˆë‹¤. ìƒì¡´ê°€ë°©ì„ ì˜ ì¤€ë¹„í•˜ì„¸ìš”!
          </p>
        </div>
        <div className="bg-blue-50 border-l-4 border-blue-500 p-6 mb-6 rounded-r-lg">
          <h2 className="text-2xl font-bold text-blue-900 mb-4">ğŸ“š ê²Œì„ ê·œì¹™</h2>
          <ul className="space-y-2 text-lg text-gray-700">
            <li>â€¢ ìƒì¡´ ì ìˆ˜ 8ì ìœ¼ë¡œ ì‹œì‘í•©ë‹ˆë‹¤</li>
            <li>â€¢ ê°€ë°© ìš©ëŸ‰ì€ 20ì¹¸ì…ë‹ˆë‹¤</li>
            <li>â€¢ 72ì‹œê°„ ë™ì•ˆ ì—¬ëŸ¬ ìƒí™©ì´ ë°œìƒí•©ë‹ˆë‹¤</li>
            <li>â€¢ í•„ìš”í•œ ë¬¼ê±´ì´ ì—†ìœ¼ë©´ ì ìˆ˜ê°€ ê°ì†Œí•©ë‹ˆë‹¤</li>
            <li>â€¢ ì ìˆ˜ê°€ 0ì  ì´í•˜ê°€ ë˜ë©´ ìƒì¡´ ì‹¤íŒ¨!</li>
          </ul>
        </div>
        <button onClick={goVideo}
          className="w-full bg-gradient-to-r from-red-500 to-orange-500 text-white font-bold py-4 px-8 rounded-xl hover:from-red-600 hover:to-orange-600 transition-all shadow-lg hover:shadow-xl">
          ì‹œì‘í•˜ê¸° â†’
        </button>
      </div>
    </div>
  </div>
);

const VideoPage = ({ onBothWatched }) => {
  const [watched, setWatched] = React.useState({ fire:false, eq:false });
  const ready = watched.fire && watched.eq;
  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-orange-50 p-4">
      <div className="max-w-6xl mx-auto">
        <div className="bg-white rounded-2xl shadow-2xl p-6 mb-4">
          <h1 className="text-3xl font-bold text-gray-800 mb-2 flex items-center gap-3">
            <svg className="w-8 h-8 text-red-500" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <polygon points="23 7 16 12 23 17 23 7"></polygon>
              <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
            </svg>
            ì¬ë‚œ ëŒ€ë¹„ ì˜ìƒ
          </h1>
          <p className="text-lg text-gray-700">ê²Œì„ì„ ì‹œì‘í•˜ê¸° ì „ì— í™”ì¬ì™€ ì§€ì§„ ëŒ€ë¹„ ì˜ìƒì„ ì‹œì²­í•´ì£¼ì„¸ìš”.</p>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
          {/* í™”ì¬ */}
          <div className="bg-white rounded-2xl shadow-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <svg className="w-8 h-8 text-red-500" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M8 14s-1-2 1-4 2-3 1-5c0 0 5 3 5 8a5 5 0 11-10 0 5 5 0 011-3"></path>
              </svg>
              <h2 className="text-2xl font-bold text-gray-800">í™”ì¬ ëŒ€ë¹„</h2>
            </div>
            <div className="ratio-16x9 bg-white rounded-xl overflow-hidden border mb-4">
              <iframe src="https://www.youtube.com/embed/UNg2QyQ7fTY" title="í™”ì¬ ëŒ€ë¹„ ì˜ìƒ"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                      allowFullScreen></iframe>
            </div>
            <button onClick={()=>setWatched(s=>({...s, fire:true}))}
              disabled={watched.fire}
              className={\`
                w-full py-3 px-6 rounded-lg font-bold transition-all
                \${watched.fire? 'bg-green-100 text-green-700 cursor-not-allowed':'bg-red-500 text-white hover:bg-red-600'}
              \`}>
              {watched.fire? 'âœ“ ì‹œì²­ ì™„ë£Œ':'ì‹œì²­ ì™„ë£Œ í‘œì‹œ'}
            </button>
          </div>

          {/* ì§€ì§„ */}
          <div className="bg-white rounded-2xl shadow-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <svg className="w-8 h-8 text-orange-500" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M3 12h3l3-9 4 18 3-9h5"></path>
              </svg>
              <h2 className="text-2xl font-bold text-gray-800">ì§€ì§„ ëŒ€ë¹„</h2>
            </div>
            <div className="ratio-16x9 bg-white rounded-xl overflow-hidden border mb-4">
              <iframe src="https://www.youtube.com/embed/DgjtZSGQGHQ" title="ì§€ì§„ ëŒ€ë¹„ ì˜ìƒ"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                      allowFullScreen></iframe>
            </div>
            <button onClick={()=>setWatched(s=>({...s, eq:true}))}
              disabled={watched.eq}
              className={\`
                w-full py-3 px-6 rounded-lg font-bold transition-all
                \${watched.eq? 'bg-green-100 text-green-700 cursor-not-allowed':'bg-orange-500 text-white hover:bg-orange-600'}
              \`}>
              {watched.eq? 'âœ“ ì‹œì²­ ì™„ë£Œ':'ì‹œì²­ ì™„ë£Œ í‘œì‹œ'}
            </button>
          </div>
        </div>

        <div className="bg-white rounded-2xl shadow-xl p-6">
          <button onClick={onBothWatched}
                  disabled={!ready}
                  className="w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold py-4 px-8 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg">
            {ready? 'ìƒì¡´ê°€ë°© ì¤€ë¹„í•˜ê¸° â†’':'ì˜ìƒì„ ëª¨ë‘ ì‹œì²­í•´ì£¼ì„¸ìš”'}
          </button>
        </div>
      </div>
    </div>
  );
};

// ====== 1) ì˜¤ëŠ˜ ë“œë¦° 'ìƒì¡´ê°€ë°©~ê²°ê³¼' íë¦„ ê·¸ëŒ€ë¡œ ======
const ITEMS = [
  { id:'water', name:'ìƒìˆ˜(500ml)', size:1, description:'ê¹¨ë—í•œ ì‹ìˆ˜ 1ë³‘' },
  { id:'food', name:'ë¹„ìƒì‹ëŸ‰', size:1, description:'í†µì¡°ë¦¼, ì—ë„ˆì§€ë°” ë“±' },
  { id:'ramen', name:'ë¼ë©´', size:1, description:'ê°„í¸ ì‹ì‚¬' },
  { id:'choco', name:'ì´ˆì½œë¦¿', size:1, description:'ë¹ ë¥¸ ì—ë„ˆì§€ ë³´ì¶©' },
  { id:'flashlight', name:'ì†ì „ë“±', size:1, description:'ë°°í„°ë¦¬ í¬í•¨' },
  { id:'radio', name:'ë¼ë””ì˜¤', size:2, description:'ê±´ì „ì§€ì‹ íœ´ëŒ€ìš© ë¼ë””ì˜¤' },
  { id:'firstaid', name:'êµ¬ê¸‰ìƒì', size:2, description:'ê¸°ë³¸ ì‘ê¸‰ì²˜ì¹˜ ë„êµ¬' },
  { id:'emergency_blanket', name:'ë¹„ìƒë‹´ìš”', size:1, description:'ë³´ì˜¨ìš© ì€ë°• ë‹´ìš”' },
  { id:'whistle', name:'í˜¸ë£¨ë¼ê¸°', size:1, description:'êµ¬ì¡° ì‹ í˜¸ìš©' },
  { id:'charger', name:'ì¶©ì „ê¸°', size:1, description:'íœ´ëŒ€í° ì¶©ì „ê¸°' },
  { id:'phone', name:'ìŠ¤ë§ˆíŠ¸í°', size:1, description:'í†µì‹  ë° ì •ë³´ í™•ì¸ìš©' },
  { id:'blanket', name:'ì´ë¶ˆ', size:5, description:'ë³´ì˜¨ìš© ì¹¨êµ¬' },
  { id:'hat', name:'ëª¨ì', size:1, description:'ë°©í•œìš©' },
  { id:'raincoat', name:'ìš°ë¹„', size:1, description:'ë°©ìˆ˜ ìš°ì˜' },
  { id:'tissue', name:'íœ´ì§€', size:1, description:'í™”ì¥ì§€' },
  { id:'gasmask', name:'ë°©ë…ë©´', size:2, description:'ìœ ë…ê°€ìŠ¤ ì°¨ë‹¨ìš©' },
  { id:'knife', name:'ì¹¼', size:1, description:'ë‹¤ëª©ì  ì¹¼' },
  { id:'tape', name:'í…Œì´í”„', size:1, description:'ë‹¤ìš©ë„ í…Œì´í”„' },
  { id:'lighter', name:'ì í™”ë„êµ¬', size:1, description:'ë¼ì´í„°, ì„±ëƒ¥' },
  { id:'photo', name:'ê°€ì¡±ì‚¬ì§„', size:1, description:'ê°€ì¡± ì‚¬ì§„' },
  { id:'map', name:'ì§€ë„', size:1, description:'ì§€ì—­ ì§€ë„' },
  { id:'salad', name:'ìƒëŸ¬ë“œ', size:2, description:'ì‹ ì„  ì±„ì†Œ' },
];

const PHASES = [
  { key:'t3', title:'ğŸ“ ì‚¬ê±´ ë°œìƒ 3ì‹œê°„ í›„',
    tasks:[
      'ğŸ¥› ë¬¼(500ml) 1ë³‘ ì†Œë¹„ â†’ ê°€ë°©ì—ì„œ ë¬¼ 1ê°œ í´ë¦­í•´ ì§€ìš°ì„¸ìš”. ì—†ìœ¼ë©´ ì ìˆ˜ -1',
      'ğŸ™ ì‹ëŸ‰ 1ê°œ ì†Œë¹„(ë¹„ìƒì‹ëŸ‰/ë¼ë©´/ì´ˆì½œë¦¿ ì¤‘ ì•„ë¬´ê±°ë‚˜ 1ê°œ) â†’ ì—†ìœ¼ë©´ ì ìˆ˜ -1',
      'ğŸ“» ì†Œì‹ í™•ì¸(ë¼ë””ì˜¤ ë˜ëŠ” ìŠ¤ë§ˆíŠ¸í° ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ ì ìˆ˜ -1)'
    ],
    tips:'ë¬¼, ì‹ëŸ‰ 1ê°œì”© ì§€ìš°ê³ , ì†Œì‹ ì—¬ë¶€ì— ë”°ë¼ ì ìˆ˜ ì¡°ì •í•˜ì„¸ìš”.'
  },
  { key:'t7', title:'ğŸ“ ì‚¬ê±´ ë°œìƒ 7ì‹œê°„ í›„ (ë¹„ê°€ ë‚´ë¦¼)',
    tasks:[
      'â„ï¸ ì²´ì˜¨ ìœ ì§€: ì´ë¶ˆ/ëª¨ì/ìš°ë¹„/ë¹„ìƒë‹´ìš” ì¤‘ 1ê°œ ë³´ìœ  â†’ ìœ ì§€, ì—†ìœ¼ë©´ ì ìˆ˜ -1',
      'ğŸ’§ ì´ë¶ˆì€ ì –ì–´ ì‚¬ìš© ë¶ˆê°€ â†’ ê°€ë°©ì— ìˆìœ¼ë©´ ì´ë¶ˆ ì œê±°',
      'ğŸ¤’ ë³‘ ê¸°ìš´ â†’ êµ¬ê¸‰ìƒì ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ ì ìˆ˜ -1'
    ],
    tips:'ì²´ì˜¨ìœ ì§€ ì•„ì´í…œ í™•ì¸, ì´ë¶ˆ ì‚­ì œ, êµ¬ê¸‰ìƒì ì—¬ë¶€ë¡œ ì ìˆ˜ ì¡°ì •.'
  },
  { key:'t15', title:'ğŸ“ ì‚¬ê±´ ë°œìƒ 15ì‹œê°„ í›„',
    tasks:['ğŸ”¥ ë¶ˆ í”¼ìš°ê¸°: ì í™”ë„êµ¬(ë¼ì´í„°/ì„±ëƒ¥) ìˆìœ¼ë©´ ì ìˆ˜ +1, ì—†ìœ¼ë©´ ë³€í™” ì—†ìŒ'],
    tips:'ì í™”ë„êµ¬ê°€ ìˆìœ¼ë©´ +1ì„ ëˆ„ë¥´ì„¸ìš”.'
  },
  { key:'t24', title:'ğŸ“ ì‚¬ê±´ ë°œìƒ 24ì‹œê°„ í›„',
    tasks:[
      'ğŸ”Œ ì¶©ì „ê¸° ì—†ìœ¼ë©´ ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš© ë¶ˆê°€ â†’ ì¶©ì „ê¸° ì—†ë‹¤ë©´ ìŠ¤ë§ˆíŠ¸í° ì‚­ì œ',
      'ğŸ¥— ìƒëŸ¬ë“œ ìƒí•¨ â†’ ìƒëŸ¬ë“œ ì‚­ì œ',
      'ğŸ¥› ë¬¼ 1ë³‘ ì†Œë¹„ â†’ ì—†ìœ¼ë©´ ì ìˆ˜ -1',
      'ğŸ™ ì‹ëŸ‰ 1ê°œ ì†Œë¹„ â†’ ì—†ìœ¼ë©´ ì ìˆ˜ -1',
      'ğŸ“» ì†Œì‹ ë“£ê¸°: ë¼ë””ì˜¤/ìŠ¤ë§ˆíŠ¸í° ìˆìœ¼ë©´ ì ìˆ˜ +1'
    ],
    tips:'ì‚­ì œí•  ê²ƒ(ìƒëŸ¬ë“œ, í°) ì§€ìš°ê³  ë¬¼/ì‹ëŸ‰ ì†Œë¹„, ì†Œì‹ ìˆìœ¼ë©´ +1.'
  },
  { key:'t30', title:'ğŸ“ ì‚¬ê±´ ë°œìƒ 30ì‹œê°„ í›„',
    tasks:[
      'â˜ï¸ ìœ ë…ê°€ìŠ¤: ë°©ë…ë©´ ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ ì ìˆ˜ -1',
      'ğŸ—ºï¸ ì§€ë„ë¡œ íƒí—˜(ì§€ë„ ìˆì„ ë•Œë§Œ ì„ íƒ ê°€ëŠ¥): ë³´ìƒì€ ìˆ˜ì—…ì—ì„œ êµ¬ë‘ ì•ˆë‚´',
      'ğŸ§» íœ´ì§€ ìˆìœ¼ë©´ ìœ„ìƒ ìœ ì§€, ì—†ìœ¼ë©´ ì ìˆ˜ -1'
    ],
    tips:'ë°©ë…ë©´/íœ´ì§€ ì—¬ë¶€ë¡œ ì ìˆ˜ ì¡°ì •. ì§€ë„ëŠ” ì„ íƒì§€ ì•ˆë‚´ìš©.'
  },
  { key:'t39', title:'ğŸ“ ì‚¬ê±´ ë°œìƒ 39ì‹œê°„ í›„ (ì–´ë‘ ê³¼ ì†Œë¦¬)',
    tasks:['ğŸ”¦ ì†ì „ë“± ìˆìœ¼ë©´ ìœ„í—˜ íšŒí”¼, ì—†ìœ¼ë©´ ì ìˆ˜ -1'],
    tips:'ì†ì „ë“± ì—†ìœ¼ë©´ -1.'
  },
  { key:'t48', title:'ğŸ“ ì‚¬ê±´ ë°œìƒ 48ì‹œê°„ í›„',
    tasks:[
      'ğŸ¥› ë¬¼ 1ë³‘ ì†Œë¹„ â†’ ì—†ìœ¼ë©´ ì ìˆ˜ -1',
      'ğŸ™ ì‹ëŸ‰ 1ê°œ ì†Œë¹„ â†’ ì—†ìœ¼ë©´ ì ìˆ˜ -1',
      'ğŸ“» ë¼ë””ì˜¤ë¡œ êµ¬ì¡°ëŒ€ ì†Œì‹ â†’ ë¼ë””ì˜¤ ìˆìœ¼ë©´ ì ìˆ˜ +1'
    ],
    tips:'ë¬¼/ì‹ëŸ‰ ì§€ìš°ê³ , ë¼ë””ì˜¤ ìˆìœ¼ë©´ +1.'
  },
  { key:'t56', title:'ğŸ“ ì‚¬ê±´ ë°œìƒ 56ì‹œê°„ í›„',
    tasks:[
      'ğŸ¥› ë¬¼ 1ë³‘ ì†Œë¹„ â†’ ì—†ìœ¼ë©´ ì ìˆ˜ -1',
      'ğŸ› ï¸ ìˆ˜ë¦¬: ì¹¼ ë˜ëŠ” í…Œì´í”„ ìˆìœ¼ë©´ ì ìˆ˜ +1'
    ],
    tips:'ë¬¼ ì§€ìš°ê³ , ì¹¼/í…Œì´í”„ ìˆìœ¼ë©´ +1.'
  },
  { key:'t64', title:'ğŸ“ ì‚¬ê±´ ë°œìƒ 64ì‹œê°„ í›„ (êµ¬ì¡° ì‹ í˜¸)',
    tasks:['ğŸ“£ í˜¸ë£¨ë¼ê¸° ìˆìœ¼ë©´ ì ìˆ˜ +1 (ì—†ìœ¼ë©´ ë³€í™” ì—†ìŒ)'],
    tips:'í˜¸ë£¨ë¼ê¸° ìˆìœ¼ë©´ +1.'
  },
  { key:'t72', title:'ğŸ“ ì‚¬ê±´ ë°œìƒ 72ì‹œê°„ í›„ (êµ¬ì¡°ëŒ€ ë„ì°©)',
    tasks:['ğŸ‘ª ê°€ì¡±ì‚¬ì§„ ìˆìœ¼ë©´ ê°€ì¡±ì„ ì°¾ëŠ”ë° ë„ì›€ (ì ìˆ˜ ë³€í™” ì—†ìŒ)'],
    tips:'ë§ˆë¬´ë¦¬ ë‹¨ê³„! ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.'
  },
];

const fmtCount = n => (n>1 ? \` Ã— \${n}\` : "");

function MainApp(){
  // í˜ì´ì§€ íë¦„: introCustom -> videoCustom -> introBag -> sim -> result
  const [page, setPage] = React.useState('introCustom');
  const [selected, setSelected] = React.useState([]);
  const [score, setScore] = React.useState(8); // ì‚¬ìš©ì íŒŒì¼ ê·œì¹™ì— ë§ì¶° 8ì  ì‹œì‘
  const [phaseIdx, setPhaseIdx] = React.useState(0);
  const [reason, setReason] = React.useState("");

  const used = selected.reduce((s, it) => s + it.size, 0);
  const remaining = 20 - used;

  const grouped = selected.reduce((acc, it) => {
    const f = acc.find(a => a.id === it.id);
    if (f) f.count += 1; else acc.push({...it, count:1});
    return acc;
  }, []);

  const addItem = (item) => {
    if (remaining - item.size < 0) return alert('ê°€ë°©ì— ê³µê°„ì´ ë¶€ì¡±í•©ë‹ˆë‹¤!');
    setSelected([...selected, item]);
  };
  const removeOneById = (id) => {
    const idx = selected.findIndex(i => i.id === id);
    if (idx !== -1) {
      const c = [...selected]; c.splice(idx,1); setSelected(c);
    }
  };

  const currentPhase = PHASES[phaseIdx];

  return (
    <div className="max-w-6xl mx-auto p-4 md:p-8">
      {page === 'introCustom' && (<IntroPage goVideo={()=>setPage('videoCustom')} />)}
      {page === 'videoCustom' && (<VideoPage onBothWatched={()=>setPage('introBag')} />)}

      {/* ====== ê°€ë°© ê¾¸ë¦¬ê¸° (ì˜¤ëŠ˜ ë“œë¦° ë²„ì „) ====== */}
      {page === 'introBag' && (
        <div className="bg-white rounded-2xl shadow-2xl p-6 md:p-8">
          <div className="flex items-center gap-3 mb-4">
            <div className="text-3xl">ğŸš¨</div>
            <h1 className="text-3xl md:text-4xl font-extrabold text-gray-800">ìƒì¡´! ë‚´ê°€ ì‚´ì•„ë‚¨ëŠ”ë‹¤</h1>
          </div>

          <div className="bg-red-50 border-l-4 border-red-500 p-4 rounded-r-xl mb-6">
            <p className="text-gray-800 leading-relaxed">
              ì¬ë‚œì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤. êµ¬ì¡°ëŒ€ê°€ ì˜¬ ë•Œê¹Œì§€ 72ì‹œê°„ì„ ë²„í…¨ì•¼ í•©ë‹ˆë‹¤.<br/>
              <b>ê°€ë°© ìš©ëŸ‰ 20ì¹¸</b> ì•ˆì—ì„œ í•„ìš”í•œ ë¬¼ê±´ì„ ì„ íƒí•˜ì„¸ìš”. (ë¹„ìƒì‹ëŸ‰ì€ ëª¨ë‘ 1ì¹¸)
            </p>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div className="md:col-span-2 bg-white rounded-2xl border p-4">
              <h2 className="font-bold text-lg mb-3">ì„ íƒ ê°€ëŠ¥í•œ ë¬¼ê±´</h2>
              <div className="grid grid-cols-2 md:grid-cols-3 gap-3 max-h-[540px] overflow-y-auto pr-2">
                {ITEMS.map(item => (
                  <button key={item.id}
                    onClick={() => addItem(item)}
                    className="text-left p-3 rounded-lg border hover:shadow transition bg-white">
                    <div className="flex justify-between">
                      <span className="font-semibold text-sm text-gray-800">{item.name}</span>
                      <span className="text-xs bg-blue-600 text-white px-2 py-0.5 rounded-full">{item.size}ì¹¸</span>
                    </div>
                    <div className="text-xs text-gray-600 mt-1">{item.description}</div>
                  </button>
                ))}
              </div>
            </div>

            <div className="bg-white rounded-2xl border p-4">
              <h2 className="font-bold text-lg mb-2">ë‚´ ìƒì¡´ê°€ë°© ğŸ’</h2>
              <div className="grid grid-cols-3 gap-2 text-center mb-3">
                <div className="bg-blue-100 rounded p-2">
                  <div className="text-xs text-blue-800">ì‚¬ìš©</div>
                  <div className="font-bold text-xl text-blue-900">{used}</div>
                </div>
                <div className="bg-green-100 rounded p-2">
                  <div className="text-xs text-green-800">ë‚¨ì€</div>
                  <div className="font-bold text-xl text-green-900">{remaining}</div>
                </div>
                <div className="bg-purple-100 rounded p-2">
                  <div className="text-xs text-purple-800">ê°¯ìˆ˜</div>
                  <div className="font-bold text-xl text-purple-900">{selected.length}</div>
                </div>
              </div>
              <div className="max-h-72 overflow-y-auto">
                {grouped.length === 0 ? (
                  <div className="text-gray-400 text-center py-8">ë¬¼ê±´ì„ í´ë¦­í•´ ë‹´ì•„ë³´ì„¸ìš”!</div>
                ) : (
                  grouped.map(it => (
                    <div key={it.id} className="flex items-center justify-between bg-gray-50 border rounded p-2 mb-2">
                      <div>
                        <div className="font-semibold text-sm text-gray-800">{it.name}{fmtCount(it.count)}</div>
                        <div className="text-xs text-gray-500">{it.size}ì¹¸ Ã— {it.count}ê°œ = {it.size*it.count}ì¹¸</div>
                      </div>
                      <div className="flex items-center gap-1">
                        <button className="px-2 py-1 text-sm rounded bg-red-100 text-red-700 hover:bg-red-200"
                                onClick={() => removeOneById(it.id)}>-1</button>
                        <button className="px-2 py-1 text-sm rounded bg-gray-200 text-gray-700 hover:bg-gray-300"
                                onClick={() => addItem(ITEMS.find(x=>x.id===it.id))}>+1</button>
                      </div>
                    </div>
                  ))
                )}
              </div>

              <button
                disabled={selected.length===0}
                onClick={()=>setPage('sim')}
                className="mt-4 w/full py-3 rounded-xl text-white font-bold shadow
                           disabled:opacity-50 disabled:cursor-not-allowed
                           bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700">
                ì¤€ë¹„ ì™„ë£Œ â†’ ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘
              </button>
            </div>
          </div>
        </div>
      )}

      {/* ====== ì‹œë®¬ë ˆì´ì…˜ ====== */}
      {page === 'sim' && (
        <div className="bg-white rounded-2xl shadow-2xl p-6 md:p-8">
          <div className="flex items-center justify-between mb-4">
            <h2 className="text-2xl md:text-3xl font-extrabold text-gray-800">ì‹œë®¬ë ˆì´ì…˜ ì§„í–‰</h2>
            <div className="flex items-center gap-3">
              <div className="px-3 py-1 rounded-full bg-rose-100 text-rose-700 font-bold">ì ìˆ˜ â¤ï¸ {score}</div>
              <button onClick={() => setScore(s => s-1)}
                      className="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300">-1</button>
              <button onClick={() => setScore(s => s+1)}
                      className="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300">+1</button>
            </div>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div className="md:col-span-2">
              <div className="rounded-2xl border p-4 bg-orange-50">
                <div className="text-xl md:text-2xl font-bold mb-2">{PHASES[phaseIdx].title}</div>
                <ul className="list-disc pl-5 space-y-2 text-gray-800">
                  {PHASES[phaseIdx].tasks.map((t,i)=>(
                    <li key={i}>{t}</li>
                  ))}
                </ul>
                <div className="mt-3 text-sm text-gray-600">ğŸ’¡ {PHASES[phaseIdx].tips}</div>
              </div>

              <div className="flex justify-between mt-4">
                <button
                  onClick={() => setPhaseIdx(i => Math.max(0, i-1))}
                  className="px-4 py-2 rounded bg-gray-200 hover:bg-gray-300">
                  â† ì´ì „ ë‹¨ê³„
                </button>
                {phaseIdx < PHASES.length-1 ? (
                  <button
                    onClick={() => setPhaseIdx(i => Math.min(PHASES.length-1, i+1))}
                    className="px-4 py-2 rounded text-white font-bold bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600">
                    ë‹¤ìŒ ë‹¨ê³„ â†’
                  </button>
                ) : (
                  <button
                    onClick={()=>setPage('result')}
                    className="px-4 py-2 rounded text-white font-bold bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700">
                    ê²°ê³¼ ë³´ê¸° â†’
                  </button>
                )}
              </div>
            </div>

            <div>
              <div className="rounded-2xl border p-4 bg-white">
                <h3 className="font-bold mb-2">ë‚´ ìƒì¡´ê°€ë°© ğŸ’</h3>
                <div className="grid grid-cols-3 gap-2 text-center mb-3">
                  <div className="bg-blue-100 rounded p-2">
                    <div className="text-xs text-blue-800">ì‚¬ìš©</div>
                    <div className="font-bold text-xl text-blue-900">{used}</div>
                  </div>
                  <div className="bg-green-100 rounded p-2">
                    <div className="text-xs text-green-800">ë‚¨ì€</div>
                    <div className="font-bold text-xl text-green-900">{20-used}</div>
                  </div>
                  <div className="bg-purple-100 rounded p-2">
                    <div className="text-xs text-purple-800">ê°¯ìˆ˜</div>
                    <div className="font-bold text-xl text-purple-900">{selected.length}</div>
                  </div>
                </div>

                <div className="max-h-72 overflow-y-auto">
                  {grouped.length === 0 ? (
                    <div className="text-gray-400 text-center py-8">ê°€ë°©ì´ ë¹„ì—ˆìŠµë‹ˆë‹¤.</div>
                  ) : (
                    grouped.map(it => (
                      <div key={it.id} className="flex items-center justify-between bg-gray-50 border rounded p-2 mb-2">
                        <div>
                          <div className="font-semibold text-sm text-gray-800">{it.name}{fmtCount(it.count)}</div>
                          <div className="text-xs text-gray-500">{it.size}ì¹¸ Ã— {it.count}ê°œ = {it.size*it.count}ì¹¸</div>
                        </div>
                        <div className="flex items-center gap-1">
                          <button className="px-2 py-1 text-sm rounded bg-red-100 text-red-700 hover:bg-red-200"
                                  onClick={() => removeOneById(it.id)}>-1</button>
                          <button className="px-2 py-1 text-sm rounded bg-gray-200 text-gray-700 hover:bg-gray-300"
                                  onClick={() => addItem(ITEMS.find(x=>x.id===it.id))}>+1</button>
                        </div>
                      </div>
                    ))
                  )}
                </div>
              </div>
            </div>
          </div>
        </div>
      )}

      {/* ====== ê²°ê³¼ ====== */}
      {page === 'result' && (
        <div className="bg-white rounded-2xl shadow-2xl p-6 md:p-8">
          <div className="text-center mb-6">
            <div className="text-4xl font-extrabold mb-2">ìµœì¢… ìƒì¡´ ì ìˆ˜</div>
            <div className="inline-block px-8 py-4 rounded-2xl text-white text-5xl font-black
                            bg-gradient-to-r from-emerald-500 to-green-600 shadow">
              {score}ì 
            </div>
            <div className="mt-3 text-xl font-bold">
              {score>0 ? "âœ… ìƒì¡´ ì„±ê³µ!" : "âŒ ìƒì¡´ ì‹¤íŒ¨..."}
            </div>
          </div>

          <div className="mb-6">
            <h3 className="font-bold text-lg mb-2">ë‚´ê°€ ì„ íƒí•œ ë¬¼í’ˆ</h3>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
              {grouped.map(it => (
                <div key={it.id} className="p-3 rounded-lg border bg-gray-50">
                  <div className="flex items-center justify-between">
                    <div className="font-semibold text-gray-800">{it.name}{fmtCount(it.count)}</div>
                    <span className="text-xs bg-blue-600 text-white px-2 py-0.5 rounded-full">
                      {it.size*it.count}ì¹¸
                    </span>
                  </div>
                  <div className="text-xs text-gray-600 mt-1">{ITEMS.find(x=>x.id===it.id)?.description || ""}</div>
                </div>
              ))}
            </div>
          </div>

          <div className="mb-6">
            <h3 className="font-bold text-lg mb-2">ì„ íƒ ì´ìœ  ì ê¸° âœï¸</h3>
            <textarea
              className="w-full border rounded-lg p-3 min-h-[120px] outline-none focus:ring-2 focus:ring-emerald-400"
              placeholder="ì™œ ì´ ë¬¼ê±´ë“¤ì„ ì„ íƒí–ˆë‚˜ìš”? ìƒí™©ë³„ë¡œ ì–´ë–¤ ë„ì›€ì´ ë˜ì—ˆë‚˜ìš”?"
              value={reason}
              onChange={(e)=>setReason(e.target.value)}
            ></textarea>
          </div>

          <div className="flex flex-wrap gap-2 justify-between">
            <button
              onClick={() => { setPage('introCustom'); setSelected([]); setScore(8); setPhaseIdx(0); setReason(""); }}
              className="px-4 py-3 rounded-xl text-white font-bold bg-gray-500 hover:bg-gray-600">
              ì²˜ìŒìœ¼ë¡œ (ì˜ìƒë¶€í„°)
            </button>
            <button
              onClick={() => navigator.clipboard.writeText(\`ìƒì¡´ì ìˆ˜: \${score}ì \nì„ íƒ ì´ìœ : \${reason}\`)}
              className="px-4 py-3 rounded-xl text-white font-bold bg-blue-600 hover:bg-blue-700">
              ê²°ê³¼ ë³µì‚¬í•˜ê¸°
            </button>
          </div>
        </div>
      )}
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<MainApp />);
  </script>
</body>
</html>
